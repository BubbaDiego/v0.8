
{% if loop.index0 == 0 %}
<!-- === HEADER ROW FOR POSITION + LIQUIDATION COLUMNS === -->
<div class="liq-header-row">
  <!-- Left side: Position labels -->
  <div class="pos-header">
    <div class="pos-col-label">Asset</div>
    <div class="pos-col-label">Wallet</div>
    <div class="pos-col-label">Heat</div>
    <div class="pos-col-label">Travel %</div>
    <div class="pos-col-label">Lev</div>
  </div>

  <!-- Right side: Bar + Heat badge -->
  <div class="liq-header">
    <div class="liq-col-label">Liquidation</div>
    <div class="liq-col-label heat-label">ðŸ”¥</div>
  </div>
</div>
{% endif %}


<!-- === RESPONSIVE ROW: Position + Liquidation Bar === -->
<div class="row-pair">

  <!-- ðŸ”¹ LEFT COLUMN: Position Fields -->
  <div class="pos-col">
    <!-- Asset with logo -->
    <div class="pos-cell asset">
      {{ pos.asset_type }}
      <img class="asset-icon" src="{{ url_for('static', filename='images/' + pos.asset_type|lower + '_logo.png') }}" alt="{{ pos.asset_type }}">
    </div>

    <!-- Wallet name -->
    <div class="pos-cell wallet">{{ pos.wallet }}</div>

    <!-- Heat index -->
    <div class="pos-cell heat">{{ pos.heat_index|int }}</div>

    <!-- Travel % -->
    <div class="pos-cell travel">{{ pos.travel_percent|round(2) }}%</div>

    <!-- Leverage -->
    <div class="pos-cell leverage">{{ pos.leverage|round(2) }}</div>
  </div>

  <!-- ðŸ”¸ RIGHT COLUMN: Liquidation Bar + Heat Badge -->
  <div class="liq-col">
    <div class="liq-bar-container">
      <div class="liq-midline"></div>

      {% set pct = pos.travel_percent|float %}
      {% if pct >= 0 %}
        <div class="liq-bar-fill positive" style="left:50%; width: {{ pct }}%;">
          <div class="travel-text">{{ pct|round(1) }}%</div>
        </div>
      {% else %}
        <div class="liq-bar-fill negative" style="right:50%; width: {{ pct|abs }}%;">
          <div class="travel-text">{{ pct|round(1) }}%</div>
        </div>
      {% endif %}
    </div>

    <div class="liq-heat-badge">
      {{ pos.heat_index|int if pos.heat_index is defined and pos.heat_index is not none else 'N/A' }}
    </div>
  </div>

</div>
