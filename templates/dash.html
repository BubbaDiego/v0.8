{% extends "base.html" %}

{% block title %}Dashboard{% endblock %}

{% block extra_styles %}
{{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
{% endblock %}

{% block content %}
<div class="container-fluid pt-4">

  <!-- Row 1: Ledger + Status -->
  <div class="box-row">
    {% include "partials/_ledger.html" %}
    {% include "partials/_statusbar.html" %}
  </div>

  <!-- Row 2: Positions + Liquidation -->
  <div class="box-row">
    {% include "partials/_positions.html" %}
    {% include "partials/_liquidation.html" %}
  </div>

  <!-- Row 3: Graph + Pie Charts -->
  <div class="box-row">
    {% include "partials/_graph.html" %}
    {% include "partials/_pie.html" %}
  </div>

</div>
{% endblock %}

{% block extra_scripts %}
{{ super() }}

<!-- ✅ API URLs -->
<script>
  var GRAPH_DATA_URL = "{{ url_for('dashboard.api_graph_data') }}";
  var SIZE_COMPOSITION_URL = "{{ url_for('dashboard.api_size_composition') }}";
  var COLLATERAL_COMPOSITION_URL = "{{ url_for('dashboard.api_collateral_composition') }}";
</script>

<!-- ✅ Libraries -->
<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

<!-- ✅ Page Specific JS -->
<script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
<script src="{{ url_for('static', filename='js/freshness_timer.js') }}"></script>
{% endblock %}
